# libraries

# @see: https://www.w3.org/TR/turtle/#h3_sec-escapes
lib.tx_lod.escape = TEXT
lib.tx_lod.escape {
	current = 1
	replacement {
		10.search = \
		10.replace = \\
		20.search = "
		20.replace = \"
		30.search = '
		30.replace = \'
		40.search = /\t/
		40.replace = \t
		40.useRegExp = 1
		50.search = /\b/
		50.replace = \b
		50.useRegExp = 1
		60.search = /\n/
		60.replace = \n
		60.useRegExp = 1
		70.search = /\r/
		70.replace = \r
		70.useRegExp = 1
		80.search = /\f/
		80.replace = \f
		80.useRegExp = 1
	}
}

lib.tx_lod.apiPlugin = CONTENT
lib.tx_lod.apiPlugin {
    table = tt_content
    select {
        pidInList = this
        max = 1
        orderBy = sorting
        where = list_type = ###list_type###
        markers {
            list_type.value = lod_api
        }
    }
}

# general extension configuration

plugin.tx_lod {
	persistence {
		classes {
			Digicademy\Lod\Domain\Model\IriNamespace {
				mapping {
					tableName = tx_lod_domain_model_namespace
				}
			}
			# mapping configuration of other classes for use in ItemMappingService
			Digicademy\Lod\Domain\Model\Iri {
				mapping {
					tableName = tx_lod_domain_model_iri
				}
			}
			Digicademy\Lod\Domain\Model\Bnode {
				mapping {
					tableName = tx_lod_domain_model_bnode
				}
			}
			Digicademy\Lod\Domain\Model\Literal {
				mapping {
					tableName = tx_lod_domain_model_literal
				}
			}
		}
	}
}

plugin.tx_lod_api {
	settings {
		api {
			realurlTypeParam = about
		}
		resolver {
			t3 {
			}
			http {
			}
			https < .http
		}
	}
}

# serialization specific configuration

<INCLUDE_TYPOSCRIPT: source="FILE:EXT:lod/Configuration/TypoScript/HTML/setup.txt">

<INCLUDE_TYPOSCRIPT: source="FILE:EXT:lod/Configuration/TypoScript/NT/setup.txt">

<INCLUDE_TYPOSCRIPT: source="FILE:EXT:lod/Configuration/TypoScript/JSONLD/setup.txt">

<INCLUDE_TYPOSCRIPT: source="FILE:EXT:lod/Configuration/TypoScript/RDFXML/setup.txt">

<INCLUDE_TYPOSCRIPT: source="FILE:EXT:lod/Configuration/TypoScript/TTL/setup.txt">
