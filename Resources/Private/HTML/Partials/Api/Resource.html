{namespace lod = Digicademy\Lod\ViewHelpers}

<f:debug>{resource}</f:debug>

<h2 class="resource-iri">
    <f:render partial="Api/Link" arguments="{value : '<{resource.namespace.iri}{resource.value}>', type : '1991', resource : resource}" />
</h2>

<dl class="resource-serialization">
    <dt>Alternative serialization</dt>
    <dd class="jsonld">
        <f:render partial="Api/Link" arguments="{value : 'JSON-LD', type : '2014', resource : resource}" />
    </dd>
    <dd class="rdfxml">
        <f:render partial="Api/Link" arguments="{value : 'RDF/XML', type : '2004', resource : resource}" />
    </dd>
    <dd class="turtle">
        <f:render partial="Api/Link" arguments="{value : 'Turtle', type : '2011', resource : resource}" />
    </dd>
    <dd class="ntriples">
        <f:render partial="Api/Link" arguments="{value : 'N-Triples', type : '2013', resource : resource}" />
    </dd>
</dl>

<dl class="resource-description">
    <dt>
        <f:render partial="Api/Link" arguments="{value : 'type', type : '1991', resource : {namespace : {prefix : 'rdf'}, value : 'type'}}" />
    </dt>
    <f:switch expression="{resource.type}">
        <f:case value="1">
            <dd>
                <f:render partial="Api/Link" arguments="{value : 'Class', type : '1991', resource : {namespace : {prefix : 'rdf'}, value : 'Class'}}" />
            </dd>
        </f:case>
        <f:case value="2">
            <dd>
                <f:render partial="Api/Link" arguments="{value : 'Property', type : '1991', resource : {namespace : {prefix : 'rdf'}, value : 'Property'}}" />
            </dd>
        </f:case>
    </f:switch>
    <f:if condition="{resource.label}">
        <dt>
            <f:render partial="Api/Link" arguments="{value : 'label', type : '1991', resource : {namespace : {prefix : 'rdfs'}, value : 'label'}}" />
        </dt>
        <dd>{resource.label}</dd>
    </f:if>
    <f:if condition="{resource.comment}">
        <dt>
            <f:render partial="Api/Link" arguments="{value : 'comment', type : '1991', resource : {namespace : {prefix : 'rdfs'}, value : 'comment'}}" />
        </dt>
        <dd>{resource.comment}</dd>
    </f:if>
</dl>

<f:if condition="{statements}">
    <h3 class="resource-statements-header">Statements</h3>
    <f:groupedFor each="{statements}" as="groupedStatements" groupBy="name" groupKey="name">
        <h4 class="resource-statements-graphname">
        <f:if condition="{name}">
            <f:then>
                <f:link.page additionalParams="{
                    type : 1991,
                    tx_lod_api : {graph : '{name.iri}'}
                    }"
                    noCacheHash="1">
                    &lt;{name.iri}&gt;
                </f:link.page>
            </f:then>
            <f:else>
                <f:link.page additionalParams="{
                    type : 1991,
                    tx_lod_api : {graph : ''}
                    }"
                    noCacheHash="1">
                    &lt;Default graph&gt;
                </f:link.page>
            </f:else>
        </f:if>
        </h4>
        <dl class="resource-statements">
            <f:for each="{groupedStatements}" as="statement">
                <dt>
                    <f:render partial="Api/Link" arguments="{value : statement.predicate.value, type : '1991', resource : statement.predicate}" />
                </dt>
                <dd>
                    <f:render partial="Api/Object" arguments="{object : statement.object}" />
                </dd>
            </f:for>
        </dl>
    </f:groupedFor>
</f:if>

<f:if condition="{resource.record}">
    <h3 class="resource-record-header">Record</h3>
    <dl class="resource-record">
        <f:if condition="{resource.record.label}">
            <dt>
                <f:render partial="Api/Link" arguments="{value : 'label', type : '1991', resource : {namespace : {prefix : 'rdfs'}, value : 'label'}}" />
            </dt>
            <dd>
                {resource.record.label}
            </dd>
        </f:if>
        <f:if condition="{resource.record.comment}">
            <dt>
                <f:render partial="Api/Link" arguments="{value : 'comment', type : '1991', resource : {namespace : {prefix : 'rdfs'}, value : 'comment'}}" />
            </dt>
            <dd>
                {resource.record.comment}
            </dd>
        </f:if>
    </dl>
</f:if>
